language: cpp
dist: trusty
sudo: required

cache: 
  - pip
  - apt
  - ccache

virtualenv:
  system_site_packages: true

before_install:
 - sudo apt-get update
 - sudo apt-get install -y tcl-dev libhdf5-serial-dev build-essential python-pip pep8 cmake python-numpy
 - sudo -H PATH="${PATH}:/usr/local/clang-3.4/bin" pip install cython --upgrade
 - if [ "$with_mpi" != false ]; then sudo apt-get install -y libopenmpi-dev openmpi-bin; fi
 - if [ "$with_fftw" != false ]; then sudo apt-get install -y libfftw3-dev; fi
 - pip install --user codecov
 - dpkg -L python-numpy
 - export

env:
  - myconfig=default
  - myconfig=maxset
  - myconfig=maxset-gaussrandom
  - myconfig=maxset-gaussrandomcut
  - myconfig=molcut
  - myconfig=rest1
  - myconfig=rest2
  - make_check=false myconfig=nocheck-maxset
  - with_fftw=false with_mpi=false myconfig=maxset

compiler:
  - gcc
  - clang

script: ./maintainer/travis/build_cmake.sh

after_success:
 - codecov
