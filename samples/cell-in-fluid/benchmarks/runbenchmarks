#!/bin/sh
g++ -o bondGenerator bondGenerator.c
path="../../testgit/testwork/./Espresso "
#killall Espresso
$path benchmarks1.tcl 0.5 0 0 0 0 1 
#killall Espresso
$path benchmarks1.tcl 0 0.01 0 0 0 2
#killall Espresso
$path benchmarks1.tcl 0 0 0.01 0 0 3
#killall Espresso
$path benchmarks1.tcl 0 0 0 0.01 0 4
#killall Espresso
$path benchmarks1.tcl 0 0 0 0 10 5
#killall Espresso
$path benchmarks1.tcl 0.5 0.01 0.01 0.01 10 6
#	killall Espresso

now=$(date +"%Y%m%d-%H%M%S")
logfile="./OUT/compare_results_$now.txt"

echo "benchmarks1:" > $logfile

string1="./b_results/tetra"
string2="b.txt"
string3="./OUT/tetra"
string4=".txt"

for i in 1 2 3 4 5 6
do
  result=$(diff $string1$i$string2 $string3$i$string4)
  if [ $? -eq 0 ]; then
      echo "$string1$i$string2 and $string3$i$string4 are the same" >> $logfile
  else
      line=$(echo $result | awk 'match($0,"c"){print substr($0,1,RSTART-1)}')
      echo "$string1$i$string2 and $string3$i$string4 differ at line $line" >> $logfile
  fi  
done

$path benchmarks2.tcl 0.1
#killall Espresso

echo "benchmarks2:" >> $logfile

string1="./b_results/sphere"
string2="b.txt"
string3="./OUT/sphere"
string4=".txt"

for i in 1
do
  result=$(diff $string1$i$string2 $string3$i$string4)
  if [ $? -eq 0 ]; then
      echo "$string1$i$string2 and $string3$i$string4 are the same" >> $logfile
  else
      line=$(echo $result | awk 'match($0,"c"){print substr($0,1,RSTART-1)}')
      echo "$string1$i$string2 and $string3$i$string4 differ at line $line" >> $logfile
  fi  
done
